matrix:
  include:
  - language: python
    python: 2.7
  - language: python
    python: 3.5
  - language: python
    python: 3.6
  - language: generic
    os: osx
    python: 3.6
install:
- curl curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain stable
- export PATH="$HOME/.cargo/bin:$PATH"
- rustc -V
- pip install -r requirements.txt
- pip install -r requirements-test.txt
script:
- python setup.py sdist bdist_wheel
- pip install -e .
- pytest test.py
deploy:
  skip_cleanup: true
  provider: pypi
  user: BYPyPi
  password:
    secure: "VyVcVR55BjXfOVxXEXAXjX6TwX4BouQthQ2qcheHLqj1SbFKfvBtQVRfkFEWcT5SwKE73gqnxmrAuskPa/d/YrF3LHkHibs0QmS9HOfxtlbWCGo2/wL7EPmh90YI6vUFl8WbFg7Q9Y1rLMtRRP3V8uejYHyE/ObQh5aYRYH4Vy0+ajmoPWbxueCVFhpel1mUFwoC8caOSEFFTrqE5L2TiiI5TB9flZJU89RuqyLMK8HuvyewZbmRgelZyOLUDWbgyCahKhAE6azmAQ2OmrT5asAs43n1bkUeog8C792p8Z2xitS5f7Fpmt5U3n4v/AELOo3l4TSBWhSgJJPut38uKJquO3oQAzAzPiFR9EJuROXTApWRoQOFwVi+MwQR9ESqN2+WBhDTDRW1rp292EjrE0ZlJyGndQfoyGNbUhf3RtOpYrr79eoTMoMmWIFjyXlD8fpGi7Su8MWIheA8feSbGqyiVNv9hnyZd4hTT7m8OOgku5DGrZpIz8ohqvdWt/xSOkd48BPmpCdA9Cz0FQEc/SSx+VgSeNXiU7MHlFeOIX2ZTq1NdpanSCs+WhVO7VQGloJWbKVCdNEjW3iQ+49FKeCJBZkPUUbP6AHrhvHH7eOzNmp0/NPehI7y1xmp4HvlCaKIBQlFeGJijPMW/4thdb+pCM0reLHVaZdlSja2eO4="
  distributions: sdist bdist_wheel
  on:
    tags: true
notifications:
  email: false
