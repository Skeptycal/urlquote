matrix:
  include:
  - language: python
    python: 2.7
  - language: python
    python: 3.5
  - language: python
    python: 3.6
  - language: generic
    os: osx
    python: 3.6
install:
- curl curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain stable
- export PATH="$HOME/.cargo/bin:$PATH"
- rustc -V
- pip install -r requirements.txt
- pip install -r requirements-test.txt
script:
- python setup.py bdist_wheel
- pip install -e .
- pytest test.py
deploy:
  skip_cleanup: true
  provider: pypi
  user: BYPyPi
  password:
    secure: V9DBPD+hGz+VpPuI5VXb6jQtHLKZFTTCMwIpkGKbJGXT8nDaTRnE4jn5ahjmnyAKB0tP92y5KsxYhP/Ko/kNZUYnyBSHTIf8m/VuUqZb2Y8o6NyiZfR750UFcWNBpd13e1acNMoJON7tamnEJoyuAlcAigC2YAEwW7biFnCTc7e/owOyb/lOEMP1xz0DE9djVUdPCjhy2INOWXA4vO7SapApLgkAuKbA+JQA7p+MBZNJIZkRhJp+8Zrl7RsX3gvUzNYKgYUe9gF7ZoO4T/+m0zqchlkdndfR7iOvUKcA6tOj9zPEmtu3HzaRACaHaZSDUMsIFkCaKwOFO1eidC7rgwiESa4zn2g/HfufwBIlqlZ1+8BS9tnFWmwPtjoIWuvfPJ3a1fIu+lNHojsv2pNdUz9fZvAj4TJhW9lPboZHu97bTGSJo7HgmHCp0tCiMNwSgxXyErT5u8g5w3aTauv1Jt4lRdp7Vbc5X8xpMJzcOyDZoFpUWo9/vIxZzAlawH6UFQgMejbpycqNrRjfTiC8szh1laAxnw5qBAh5UdWB85D9oJ7DBLOUl0hvD/lpF2rUpfV7VTY70ARb5Xu5xz5+Kk8SqN2oKSXZqKBoKCuIkOFlfNZBw0Xkk6SBJCpDrP/Hks5agJzu/xSOeqCy3gUeWmJnbAPqGEir0YqzupHBa3k=
  distributions: sdist bdist_wheel
  on:
    tags: true
notifications:
  email: false
